
<html>

<head>
	<title>Ajax counter</title>
	<script type="text/javascript" src="/media/jquery-1.3.2.min.js"></script>
	<script type="text/javascript">
		function update_xml() {
			$.ajax({
				method : 'get',
				url : 'count/xml/',
				dataType : 'xml',
				success : function(data) {
					$('#nid').html($(data).text())
				}
			})
		}

		function update_json() {
			$.ajax({
				method : 'get',
				url : 'count/json/',
				dataType : 'json',
				success : function(data) {
					$('#nid').html(data['count'])
				}
			})
		}

		function update_plaintext() {
			$.ajax({
				method : 'get',
				url : 'count/plaintext/',
				dataType : 'text',
				success : function(text) {
					$('#nid').html(text);
				}
			})
		}

		$(document).ready(function() {
//			update_plaintext(); var iv = setInterval(update_plaintext, 1000);
//			update_json(); var iv = setInterval(update_json, 1000);
			update_xml(); var iv = setInterval(update_xml, 1000);
		})
	</script>
</head>

<body>
	<h2>Registered Students</h2>
	<p>
		<span id="nid">0</span>
	</p>
</body>

</html>

